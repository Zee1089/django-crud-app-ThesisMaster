{% extends 'base.html' %} 
{% load static %} 

{% block head %}
<link rel="stylesheet" href="{% static 'css/researchpapers/researchpaper-detail.css' %}" />
{% endblock %} 

{% block content %}
<section class="researchpaper-container">
  <div class="researchpaper-img">
    <!-- You can include an image related to the research paper if available -->
    <img src="{% static 'images/bookworm.svg' %}" alt="Book Person Icon" />
  </div>
  <div class="researchpaper-details">
    <h1>{{ researchpaper.title }}</h1>
    <h2>Authors: {{ researchpaper.authors }}</h2>
    <h3>Journal: {{ researchpaper.journal }}</h3>
    <p>Published on: {{ researchpaper.publication_date }}</p>
    <p>{{ researchpaper.major_findings }}</p>

    <div class="researchpaper-actions">
        <a href="{% url 'researchpaper-update' researchpaper.id %}" class="btn warn">Edit</a>
        <a href="{% url 'researchpaper-delete' researchpaper.id %}" class="btn danger">Delete</a>
      </div>
    </div>

    <div class="comments-section">
        <section class="comments">
            <div class="subsection-title">
                    <!-- <img src="{% static 'images/comment-icon.svg' %}" alt="Comment icon" /> -->
            </div>
            <!-- <h3>Add a Feeding</h3> -->
            <form class="add-comment-btn"
                action = "{% url 'add-comment' researchpaper.id %}"
                method="post" 
                class="subsection-content" 
                autocomplete="off">
                {% csrf_token %} 
                {{ comment_form.as_p }}
                <button type="submit" class="btn submit">Add Comment</button>
            </form>

            <h3>Past Comments</h3>
            {% if researchpaper.comment_set.all.count %}
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Comment</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for comment in researchpaper.comment_set.all %}
                        <tr>
                            <td>{{ comment.date }}</td>
                            <td>{{ comment.note }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <div class="subsection-content">
                    <p>⚠️ There are no comments on this research paper yet!</p>
                </div>
            {% endif %}



          <table>
            <!-- <thead>
              <tr>
                <th>Date</th>
                <th>User</th>
                <th>Comment</th>
              </tr>
            </thead> -->
          </table>
        </section>
      </div>
      

    
    


  </div>
</section>
{% endblock %}
